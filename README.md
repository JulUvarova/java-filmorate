# java-filmorate

–ë–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ñ–∏–ª—å–º–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±–∏—Ä–∞—Ç—å —Ñ–∏–ª—å–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ü–µ–Ω–æ–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#%EF%B8%8F-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–§—É–Ω–∫—Ü–∏–∏](#-—Ñ—É–Ω–∫—Ü–∏–∏)
- [REST API](#%EF%B8%8F-rest-api)
- [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#-–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
- [–í–∞–ª–∏–¥–∞—Ü–∏—è](#-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- [–ó–∞–ø—É—Å–∫](#-–∑–∞–ø—É—Å–∫)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î](#%EF%B8%8F-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–¥)
- [–°—Ö–µ–º–∞ –ë–î](#-—Å—Ö–µ–º–∞-–±–¥)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Java
- Spring Boot
- H2 Database
- Maven
- REST API

## üéØ –§—É–Ω–∫—Ü–∏–∏
### –§–∏–ª—å–º—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤
- –õ–∞–π–∫–∏ –∏ —Ç–æ–ø-N –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ MPA

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ –¥—Ä—É–∑–µ–π
- –ü–æ–∏—Å–∫ –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π

## üõ†Ô∏è REST API
### –§–∏–ª—å–º—ã
| –ú–µ—Ç–æ–¥   | –ü—É—Ç—å                          | –î–µ–π—Å—Ç–≤–∏–µ                     |
|---------|-------------------------------|------------------------------|
| POST    | `/films`                      | –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å–º                |
| PUT     | `/films`                      | –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å–º               |
| GET     | `/films`                      | –í—Å–µ —Ñ–∏–ª—å–º—ã                   |
| GET     | `/films/{id}`                 | –§–∏–ª—å–º –ø–æ ID                  |
| PUT     | `/films/{id}/like/{userId}`   | –õ–∞–π–∫–Ω—É—Ç—å —Ñ–∏–ª—å–º               |
| DELETE  | `/films/{id}/like/{userId}`   | –£–¥–∞–ª–∏—Ç—å –ª–∞–π–∫                 |
| GET     | `/films/popular?count={n}`    | –¢–æ–ø-N –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤     |

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
| –ú–µ—Ç–æ–¥   | –ü—É—Ç—å                                  | –î–µ–π—Å—Ç–≤–∏–µ                     |
|---------|---------------------------------------|------------------------------|
| POST    | `/users`                              | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è         |
| PUT     | `/users`                              | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è        |
| GET     | `/users`                              | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏             |
| GET     | `/users/{id}`                         | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID           |
| PUT     | `/users/{id}/friends/{friendId}`      | –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞               |
| DELETE  | `/users/{id}/friends/{friendId}`      | –£–¥–∞–ª–∏—Ç—å –¥—Ä—É–≥–∞                |
| GET     | `/users/{id}/friends`                 | –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π                |
| GET     | `/users/{id}/friends/common/{otherId}`| –û–±—â–∏–µ –¥—Ä—É–∑—å—è                |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- `GET /genres` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∂–∞–Ω—Ä—ã
- `GET /genres/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∂–∞–Ω—Ä –ø–æ ID
- `GET /mpa` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ MPA
- `GET /mpa/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ MPA –ø–æ ID

## üóÉÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö 
### –ö–ª–∞—Å—Å `Film`
```java
public class Film {
    private int id;
    private String name;
    private String description;
    private LocalDate releaseDate;
    private int duration;
    private Set<Genre> genres;
    private Mpa mpa;
}
```
### –ö–ª–∞—Å—Å User
```java
public class User {
    private int id;
    private String email;
    private String login;
    private String name;
    private LocalDate birthday;
    private List<Integer> friends;
}
```
### –ö–ª–∞—Å—Å Genre
```java
public class Genre {
    private int id;
    private String name;
}
```
### –ö–ª–∞—Å—Å Mpa
```java
public class Mpa {
    private int id;
    private String name;
}
```

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è
–î–ª—è —Ñ–∏–ª—å–º–æ–≤:
- –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –ø—É—Å—Ç–æ–µ (@NotBlank)
- –û–ø–∏—Å–∞–Ω–∏–µ ‚â§ 200 —Å–∏–º–≤–æ–ª–æ–≤ (@Size)
- –î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ ‚â• 28 –¥–µ–∫–∞–±—Ä—è 1895 (@PastOrPresent)
- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å > 0 (@Positive)
–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- Email —Å–æ–¥–µ—Ä–∂–∏—Ç @ (@Email)
- –õ–æ–≥–∏–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ (@Pattern)
- –ò–º—è –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –ª–æ–≥–∏–Ω–æ–º, –µ—Å–ª–∏ –ø—É—Å—Ç–æ–µ
- –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è ‚â§ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã (@Past)

## üöÄ –ó–∞–ø—É—Å–∫
–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/your-username/filmorate.git
```
–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:
```bash
mvn clean package
```
–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
java -jar target/filmorate.jar
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
application.properties:

```
spring.sql.init.mode=always
spring.datasource.url=jdbc:h2:file:./db/filmorate
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
```

## üìä –°—Ö–µ–º–∞ –ë–î

![scheme DB](/src/main/resources/Scheme%20of%20DB.PNG)

DDL-—Å–∫—Ä–∏–ø—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ src/main/resources/schema.sql

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Controller ‚Üí Service ‚Üí Storage)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ H2: in-memory –∏ persistent
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—à–∏–±–æ–∫ —Å HTTP-—Å—Ç–∞—Ç—É—Å–∞–º–∏:
- 400 Bad Request - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- 404 Not Found - –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- 500 Internal Server Error - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞
